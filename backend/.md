üß† CampusMind: Your AI-Powered Academic Assistant
CampusMind is an intelligent web application designed to help students regain control of their academic lives. By seamlessly syncing data from Canvas and Google Calendar, it creates a unified, dynamic schedule. Powered by a suite of specialized AI agents, CampusMind doesn't just show you your schedule‚Äîit helps you optimize it for success and well-being.

Core Features
Unified Calendar: Combines Google Calendar events with Canvas assignments, exams, and class schedules into a single, interactive drag-and-drop interface.

Dynamic Scheduling: An AI agent analyzes your commitments and free time to build an optimal study schedule that you can manually adjust.

Personalized Study Plans: Feed the AI your course materials (notes, slides), and it will generate tailored study guides for your exams and quizzes.

Proactive Wellness: A friendly AI checks in on your stress levels and can automatically adjust your schedule to prevent burnout.

üíª Technical Stack
Frontend: Next.js

Backend: FastAPI (Python)

Database: MongoDB with Atlas Vector Search

Authentication: Next.js BFF (Backend for Frontend) pattern, using OAuth for Google Calendar and Personal Access Tokens for Canvas.

AI Implementation: Strands SDK

üíæ Proposed Data Schemas (MongoDB)
Here are the refined schemas based on our project direction.

1. User Auth Schema
   Stores basic authentication information for NextAuth integration.

```json
const UserAuthSchema = new Schema({
  email: { type: String, required: true, unique: true },
  name: { type: String, required: true },
  image: { type: String, optional: true },
});
```

2. User Account Schema
   Stores user account information and API integration credentials.

```json
const UserAccountSchema = new Schema({
userId: { type: Schema.Types.ObjectId, ref: 'User' },
// Securely stored OAuth 2.0 refresh and access tokens for Google
googleAuth: {
  accessToken: { type: String },
  refreshToken: { type: String },
  expiryDate: { type: Date },
},
// Encrypted Canvas API key provided by the user
canvasToken: { type: String }
});
```

3. User Preferences Schema
   Stores user preferences for scheduling and study habits.

```json
const UserPreferencesSchema = new Schema({
userId: { type: Schema.Types.ObjectId, ref: 'User' },
studyBlockDuration: { type: Number, default: 60 }, // in minutes
breakDuration: { type: Number, default: 15 },
travelDuration {type: Number, default: 10}
// Defines times AI shouldn't schedule over, e.g., {"start": "12:00", "end": "13:00"}
recurringBlockedTimes: [{ dayOfWeek: String, start: String, end: String }]
});
```

### 4. `AcademicEvent` Schema

A unified schema for all scheduled items. The `isLocked` flag allows for dynamic user control over the AI's scheduling.

```json
const AcademicEventSchema = new Schema({
userId: { type: Schema.Types.ObjectId, ref: 'User' },
title: { type: String, required: true },
type: {
type: String,
enum: ['ASSIGNMENT', 'EXAM', 'CLASS', 'STUDY_BLOCK', 'PERSONAL', 'BREAK'],
required: true
// Note on 'ASSIGNMENT': This represents the deadline.
// For assignments, startTime will equal endTime to mark the exact due date.
// The AI will then create separate 'STUDY_BLOCK' events to allocate work time.
},
source: {
type: String,
enum: ['CANVAS', 'GOOGLE', 'CAMPUSMIND_AI'],
required: true
},
startTime: { type: Date, required: true },
endTime: { type: Date, required: true },
courseId: { type: Schema.Types.ObjectId, ref: 'Course', optional: true },
isCompleted: { type: Boolean, default: false },
// This acts as a 'lock'. If true, the Schedule Maker Agent cannot move or delete this event.
// Users can toggle this on/off for any event in the UI to protect it from AI re-scheduling.
isLocked: { type: Boolean, default: false }
});
```

### 5. `Document` Schema

Stores the raw text and vector embeddings of user-uploaded course materials. This schema is the foundation for the Study Planner Agent.

```json
const DocumentSchema = new Schema({
userId: { type: Schema.Types.ObjectId, ref: 'User' },
courseId: { type: Schema.Types.ObjectId, ref: 'Course' },
// Optional link to a specific exam event if the user uploads material for one exam.
relatedExamId: { type: Schema.Types.ObjectId, ref: 'AcademicEvent', optional: true },
fileName: { type: String, required: true },
documentType: {
type: String,
enum: ['LECTURE_NOTES', 'SLIDES', 'READING', 'OTHER'],
required: true
},
// The full text content extracted from the uploaded file.
rawText: { type: String, required: true },
// The vector embedding generated from the rawText, used for similarity search.
embedding: { type: Array, required: true }
});
```

_Other schemas like `Course` would remain largely the same as previously defined._

## ü§ñ AI Agents (Implemented with Strands SDK)

The core intelligence of CampusMind is driven by four distinct AI agents working in concert.

### 1. Schedule Maker Agent

This is the master planner. Its primary role is to create and maintain the user's dynamic schedule, respecting their manual inputs.

- **Schedules Around Deadlines:** It identifies `ASSIGNMENT` and `EXAM` events and intelligently schedules `STUDY_BLOCK` events in the preceding days and hours.

- **Conflict-Free Scheduling:** It populates free time with `STUDY_BLOCK` and `BREAK` events. Crucially, it will treat any event with `isLocked: true` as a fixed, "locked" block, thus preventing conflicts with user-set appointments.

- **Adapts to Manual Changes:** When a user an interacts with the schedule such as dragging an event or toggling its `isLocked` lock to `true`, clicks sends a request to re-optimize, the agent will automatically re-optimize the schedule based on these new changes.

- **Travel Times** There should be buffers between exams, lectures, and personal using `travelDuration` as it's time.

### 2. Study Planner Agent

This agent acts as a personal tutor.

- **Ingests Materials:** A backend process will parse uploaded documents (PDFs, PPTX files) to extract raw text and potentially image-based information.
- **RAG with Vector Search:** It leverages **MongoDB Atlas Vector Search** to perform Retrieval-Augmented Generation (RAG). When asked to create a study guide for an upcoming exam, it will query the vectorized `Document` collection to find the most relevant information and synthesize a comprehensive plan.

### 3\. Health Check AI Agent

This agent focuses on the user's well-being.

- **Dynamic Check-in Cycle:** The agent initiates check-ins ("How are you feeling?") and analyzes the sentiment of the user's text response.
- **Adaptive Frequency:** Based on the analysis, it adjusts the time until the next check-in. A positive response might push the next check-in to 60 minutes, while a stressed or negative response could trigger a follow-up in 30 minutes.
- **Proactive Adjustments:** If a user consistently reports feeling overwhelmed, the agent will coordinate with the **Schedule Maker Agent** to inject more breaks or shorten study blocks for the day.

### 4\. Vector Agent

This is a foundational agent that provides contextual data to all other agents by acting as a direct interface to the vector database.

- **Serves Context:** Its main job is to perform fast and accurate similarity searches on the vectorized data in MongoDB.
- **Powers Other Agents:** It provides the necessary context for the **Study Planner** to generate guides and could help the **Schedule Maker** prioritize which subjects need more study time based on document content and level of confidence.

---

## ‚öôÔ∏è Implementation Notes

- **Document Parsing:** For ingesting user-uploaded files, we can use Python libraries like `PyMuPDF` for PDFs and `python-pptx` for PowerPoint files to extract text content. For images or slides with diagrams, an OCR (Optical Character Recognition) service or model could be integrated.
- **Onboarding Flow:** The initial user setup will be a guided, step-by-step process within the Next.js application to handle Google OAuth and the input of the Canvas Personal Access Token.

---

## üîÅ Core Scheduling Workflow

This section outlines the primary user interaction for generating and updating a study schedule. The process is designed to be a continuous, self-correcting loop.

**1. User Prioritizes a Subject (The Trigger)**

- The user interacts with the UI to select one or more classes they want to focus on for a specific period (e.g., "Prioritize 'Calculus II' this week").
- This action sends a request to the backend, signaling the **Schedule Maker Agent** to begin a new planning cycle with this new priority in mind.

**2. AI Generates the Schedule (The Initial Write)**

- The **Schedule Maker Agent** executes its core logic:
  - **Reads "Pillars":** It fetches all fixed events (classes, exams, personal appointments, locked events).
  - **Wipes the Slate:** It deletes all previous AI-generated `STUDY_BLOCK` and `BREAK` events from the database.
  - **Plans with Priority:** It analyzes the available free time and, using the user's prioritization, allocates a higher number or longer duration of `STUDY_BLOCK` events to the selected subject(s).
  - **Writes the Schedule:** It populates the database with the new, optimized schedule. The frontend updates in real-time to display it.

**3. The Loop Continues (The Re-Write)**

- The schedule remains dynamic. Any of the following actions will automatically re-trigger the entire "Read-Wipe-Write" cycle described in Step 2:
  - A new assignment or class is synced from Canvas.
  - The user interacts with the UI to request an adjustment (usually after they input something).
  - The Health Check AI requests a schedule adjustment.
- Each time, the agent re-evaluates the entire schedule to ensure it remains optimal and conflict-free based on the latest information.
- The schedule itself should not change that much and fundamentally should stay the same if possible.
